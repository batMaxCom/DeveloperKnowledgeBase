# Удаление файлов и каталогов
`rm -v aria.ogg` - удалить файл (флаг -v для визуализации процесса)

`rm -iv intermezzo.wav` - Флаг -i потребует подтвердить решение перед удалением

`rm -rvi rehearsals` - удалить рекурсивно

`rm -rv rehearsals/2020/jan` - удалить определенный каталог

`$ rm -v *.txt` - удалить файлы с определенным расширением

`rm -v aria*` - удалить файлы с именами, начинающимися с определенной последовательности символов

`rm -rf` - force, удаляет принудительно

# Копирование

`cp -v aria.ogg ~/songs2/` - скопировать файл или каталог

`cp -v aria.ogg solo.flac ~/songs2/` - скопировать несколько файлов

`cp -rv ~/music/songs2 /shared/archives` - скопировать рекурсивно

`cp -rv --parents duchess/music/songs2/ shows/` - скопировать с сохранением структуры каталогов
```bash
duchess -> shows/duchess
duchess/music -> shows/duchess/music
'duchess/music/songs2' -> 'shows/duchess/music/songs2'
'duchess/music/songs2/intro.flac' -> 'shows/duchess/music/songs2/intro.flac'
'duchess/music/songs2/reprise.flac' -> 'shows/duchess/music/songs2/reprise.flac'
'duchess/music/songs2/solo.flac' -> 'shows/duchess/music/songs2/solo.flac'
```

Полезные параметры:
`-a, --archive` — сохраняет все атрибуты файлов, такие как разрешения, владение и отметки времени;
`-i, --interactive` — запрашивает подтверждение, если копирование приведет к затиранию существующих файлов;
`-u, --update` — затирает существующие файлы, только если копируемый файл более новый. Этот параметр поможет сэкономить время, когда требуется повторно скопировать пакет файлов, часть из которых не изменилась

# Перемещение
`mv -v aria.ogg solo.flac ~/songs2/` - переместит файлы
`mv -v ~/songs2/ ~/music/` - переместит каталог
 Полезные параметры:
`-i, --interactive` — запрашивает подтверждение, если перемещение приведет к затиранию существующих файлов;
`-n, --no-clobber` — предотвращает затирание существующих файлов;
`-u, --update` — перемещает файлы, только если они более новые, чем файлы с теми же именами в каталоге назначения, или если они перемещаются впервые.

# Разрешения

## Используя 8-ричное представление

`chmod -v 755 aria.ogg` - установить разрешения на файл

`chmod -v 755 aria.ogg solo.flac` - установить разрешения на несколько файлов

`chmod -v 755 aria.ogg solo.flac ~/songs2/` - установить разрешения на файлы и каталоги

`chmod -R 0755 /shared` - применит одни и те же разрешения к существующему содержимому каталога (`-R` рекурсивно)

`chmod -v 644 *.txt` - назначит права всем файлам .txt

`chmod -v 644 abcd*` - назначит права всем файлам начинающимся с `abcd`

В восьмеричном представлении используются целые числа 0–7:

| Режим                 | Владелец | Группа | Остальные |
|-----------------------|----------|--------|-----------|
| Чтение                | 4        | 4      | 4         |
| Запись                | 2        | 2      | 2         |
| Выполнение            | 1        | 1      | 1         |
| Отсутствие разрешений | 0        | 0      | 0         |


Разрешения для файлов в Linux

| Разрешение | Описание                                                                                                                                                                                                                                                                                                                                                                                                                               | 
|------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 7          | Чтение, запись, выполнение. Каталоги отличаются от файлов, поскольку для всех каталогов требуется установить бит выполнения. Вы можете назначить каталогу любые разрешения, как и файлу, но без установленного бита выполнения никто не сможет войти в каталог (командой cd или в диспетчере файлов). Сценарии и двоичные команды тоже должны иметь установленный бит выполнения, иначе они будут интерпретироваться как обычные файлы |
| 6          | Чтение и запись                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 5          | Чтение и выполнение. Это типичный набор разрешений для команд                                                                                                                                                                                                                                                                                                                                                                          |
| 4          | Чтение                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 3          | Запись и выполнение                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 2          | Запись                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 1          | Выполнение                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 0          | Полное отсутствие разрешений                                                                                                                                                                                                                                                                                                                                                                                                           |

## Используя символическое представление

Операторы команд:
- `+` добавляет указанное разрешение в набор;
- `–` удаляет указанное разрешение из набора;
- `=` добавляет указанные разрешения и удаляет неуказанные.

`chmod -v g+w,o+w file.txt` - Где g+w(добавляем группам запись), o+w(добавляем остальным запись)
`chmod -v u=rw,g=rw,o-r file.txt` - где `=` назначает определенный перечень прав, а - удаляет данный вид прав из существующих

Параметры применяются параметры к:
- Пользователь (user) `u`
- Группа (group) `g`
- Все остальные (other) `o`
- Все (all) `a`

Права:
- `r` read — чтение
- `w` write — запись
- `x` execute — выполнение
- 
Символ `d` в наборе `drwxr-xr-x` сообщает, что это `каталог` (directory).

## Смена владельца файла

В простейшем виде эта команда имеет следующий синтаксис: `chown пользователь:группа имя_файла`. Можно сменить и только владельца: `chown пользователь: имя_файла` — или только группу: `chown :группа имя_файла`.

Для смены владельца нужны привилегии root:
`sudo chown -v madmax: song.wav`

Смена группы:
`sudo chown -v :composers song.wav`

Смена и владельца, и группы:
`sudo chown stash:stash song.wav`

Сменить владельца у нескольких файлов одной командой
`sudo chown -v madmax:share file1 file2 file3`

Передаст все файлы с расширением .txt, находящиеся в текущем каталоге, во владение новой группе:
`sudo chown -v :share *.txt`

Передать все содержимое каталога указанным пользователям
`chown -Rv --from duchess stash /shared/compositions`
`chown -Rv --from 1001 1005 /shared/compositions`

# Символические и жесткие ссылки

Символические ссылки могут ссылаться на файлы и каталоги, а жесткие — только на файлы.

`ln -s /files/userstuff stuff` - создаст в текущем каталоге символическую ссылку на внешний каталог /files/userstuff
`-s` - symbolic link (символическая ссылка)
Здесь /files/userstuff — это цель, а stuff — имя символической ссылки. Можно давать своим ссылкам любые имена.

`Жесткие ссылки` — это копии файлов. По умолчанию команда ln создает жесткие ссылки:
`ln /files/config1.txt myconf.txt`

Жесткая ссылка ссылается на индексный узел, который имеет каждый файл.
Узнать его можно с помощью флага `-i` команды `ls`
`ls -li` -> `1353 -rw-rw-r-- 3 madmax madmax 11208 Apr 26 13:06 config.txt`

Создавая жесткую ссылку, вы фактически создаете новое имя файла для существующего блока данных.
Жесткие ссылки остаются работоспособными всегда, поскольку ссылаются непосредственно на индексные узлы. 
Файлы, на которые ссылается несколько жестких ссылок, можно перемещать, переименовывать и редактировать, и все эти операции будут отражаться на жестких ссылках, поскольку все они ссылаются на один и тот же блок данных.
Файл не удаляется с диска полностью, пока не будут удалены все жесткие ссылки на него. Убедиться в этом можно с помощью команды ls.

`find /etc -xdev -samefile config3.txt` - найти все жесткие ссылки

# Сокрытие файлов и каталогов

Добавление точки в начало имени любого файла делает его скрытым
