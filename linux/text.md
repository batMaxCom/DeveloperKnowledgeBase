# Текстовые файлы

## Чтение
Распространенные команды для вывода содержимого файлов:
- `cat`: отображает содержимое файла.
- `tac`: делает то же самое, что и cat, но отображает содержимое в обратном порядке.
- `tail`: показывает только последние строки текстового файла. По умолчанию 10 строк. Параметр `-3`, указывает необходимое количество строк(в данном случае 3)
- `head`: отображает первые строки файла. По умолчанию 10 строк. Параметр `-3`, указывает необходимое количество строк(в данном случае 3)
- `less`: открывает расширенную программу просмотра файлов.
- `more`: то же самое, что и less, только с меньшими возможностями.

## tail/head
По умолчанию 10 строк. Параметр `-3`, указывает необходимое количество строк(в данном случае 3)
`tail -3 /etc/hosts`
`head -3 /etc/hosts`

Можно комбинировать:
head -n 2 /etc/hosts | tail -n 1

## Манипуляции с тестовым файлом

### Преобразование
Команда `tr` применяется для преобразования или удаления символов из файла.

`cat test.txt | tr a-z A-Z` - преобразуем текст в верхний регистр

### Сортировка
Для сортировки строк в файле применяется команда sort:
`cat test.txt | sort`

По умолчанию команда сортирует строки в лексикографическом порядке.
`cat test.txt | sort -n` - если мы хотим сравнивать значения чисел

### Получение определенной информации
Команда cut позволяет получить из структурированного файла определенный кусок информации.

Параметры:
-d: представляет разделитель данных в строке
-f: представляет список номеров полей для вывода. Список полей можно задать с помощью одного из следующих форматов:
    N: выводит поле с номером N (нумерация начинается с 1)
    N-: определяет диапазон полей, который начинается с номера N и заканчивается последним полем
    N-M: определяет диапазон полей от N до M
    -M: определяет диапазон полей, который начинается с первого поля и заканчивается полем с номером M

Пример файла:
```
Tom:39:Microsoft
Bob:43:Google
Sam:28:Jetbrains
Alice:34:Oracle
Kate:25:Google
```

`cut -d : -f 1 test.txt` - -d указывает, что разделитель - двоеточие, а опция -f указывает, что надо получить 1-е поле

Выведет
```
Tom
Bob
Sam
Alice
Kate
```

`cut -d : -f 1-2 test.txt` - с 1-го по 2-е поле

`cat test.txt | cut -d : -f 1 | sort | head -3` - выведем первые три имени, отсортированные по возрастанию

## Команда grep. Поиск в тексте
Команда grep выполняет поиск в файле с использованием регулярных выражений. Она имеет следующий формат:
`grep [OPTIONS] PATTERNS [FILE]`

`grep "127.0." /etc/hosts` - найдем текст "127.0." в файле /etc/hosts
`ls ~ | grep "Do"` - найдем в домашнем каталоге пользователя папки и файлы, названия которых начинаются на "Do"

Основные элементы регулярных выражений:
`^`: указывает, что соответствие шаблону должно находиться в начале строки. Например, найдем строки, которые начинаются на символ "s":
`ls ~ | grep "^s"`

`$`: указывает, что соответствие шаблону должно находиться в конце строки. Например, найдем все файлы с расширением "txt":
`ls ~ | grep "\.txt$"`

`.`: соответствует любому символу. Например, пусть в домашнем каталоге пользователя у нас есть следующий файл test.txt
`grep "T.m" test.txt` - Найдем все строки, которые содержат "Tim" или "Tom":

`[]`: указывает символы в регулярном выражении, которые следует интерпретировать как альтернативы. Например, найдем все строки, которые содержат "Tum" или "Tom":
`grep "T[ou]m" test.txt`

`[^ ]`: игнорирует все символы после знака ^. Например, найдем все строки, которые НЕ содержат "Tum" или "Tom":
`grep "T[^ou]m" test.txt`

`-`: определяет диапазон символов, которому должен соответствовать символ. Например, найдем все строки, которые начинаются с цифрового символа:
`grep "^0-9" test.txt`

`\`: позволяет экранировать спец. символы. 
Например, символ точки . рассматривается как заменитель произвольного символа. 
Но если нам надо указать, что текст должен содержать именно точку как стандартный символ, то нам надо использовать "\.". 
Например, найдем в папке загрузок все файлы, которые имеют расширение tar.gz:
`ls ~/Downloads | grep "\.tar\.gz"`

`*`: указывает, что предыдущее регулярное выражение может встречаться один раз, несколько раз или не встречаться вообще

`?`: указывает, что предыдущее регулярное выражение может встречаться один раз или может отсутствовать

`+`: указывает, что предыдущее регулярное выражение может встречаться один или более раз

`\{n\}`: указывает, что предыдущий символ может встречаться как минимум n раз. Например, найдем строки, где есть два буквы o подряд:
`grep "o\{2\}" test.txt`

## awk
Сначала команде awk передается параметр `pattern` - шаблон (регулярное выражение), которому должен сооответствовать текст. 
Обычно шаблоны `заключаются между косыми чертами`. 
Далее идет параметр `action`, который задает действия над найденным соответствием. 
Действия `заключаются в фигурные скобки`.

Пример текста:
```
Tom:39:Microsoft
Bob:43:Google
Sam:28:Jetbrains
Alice:34:Microsoft
Kate:25:Google
Tim:23:-
Tomas:31:Apple
```

`awk '/Tom/' users.txt` - получить все строки, где имя пользователя - "Tom"

С помощью опции `-F` можно установить символ, который будет применяться в качестве разделителя.
`awk -F : '/Tom/{print $3}' users.txt` - выведем только компанию, в которой работают пользователи с именем "Tom", где `print`,  встроенная команда, которая вывыодит передаенное ей значение (`$0` означает всю строку.)

Поддержка операция сравнения:
`awk -F : '$2 > 30 {print $1}' users.txt` - выведем пользователей, у которых возраст больше 30

